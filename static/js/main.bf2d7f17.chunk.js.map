{"version":3,"sources":["calculations/maps.ts","calculations/util.ts","ui/degrees-input.tsx","ui/number-input.tsx","ui/tooltip.tsx","PVArraysInfo/PVArrayInfo.tsx","PVArraysInfo/PVArraysInfo.tsx","util.ts","calculations/wh-factor.ts","display/energy-production.ts","display/AverageOutputPerDayByMonth.tsx","FindLatitude.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["year","toRadians","Math","acos","tan","angle","PI","sin","currentYear","cos","asin","Date","getFullYear","daysInYear","maxDecRad","declinationsForYear","result","Array","i","orientationsToAzimuth","forEach","orientation","DegreesInput","props","num","_label","setVal","value","moreProps","useState","focused","setFocused","style","width","className","htmlFor","name","String","charCodeAt","length","fromCharCode","aria-label","onBlur","numVal","Number","isNaN","onFocus","str","substr","onChange","e","target","NumberInput","ToolTip","text","PVArrayInfo","remove","val","tilt","Object","keys","map","key","watts","onClick","PVArraysInfo","pvArrays","setPVArrays","pvArrayInit","removeArray","slice","pvArray","memoize","fn","cache","args","JSON","stringify","savedVersion","window","localStorage","memoizeLSVersion","startsWith","truncate","precision","factor","prefix","mTan","calculateWHFactorForYear","opts","dec","calculateWHFactorForDay","lat","intervalRad","F","n","a","b","Error","h","sum","simpson","x","hourAngle","percentage","instantIntensityPercentage","samplesPerDay","azimuth","sinLat","sinDec","cosHA","sinHA","cosLat","cosDec","altitude","cosAlt","tmp","getDaysInMonth","month","getDate","getAvgProdByMonth","pvArrayInfo","whFactorInfo","whFactorForYear","curDay","_","arr","monthFactors","reduce","acc","cur","whFactor","getAvgProdByMonthLS","memoizeLSPrefix","parse","monthLabels","AverageOutputPerDayByMonth","getAvgProdsByMonth","calculating","data","time","avgProdByMonth","setAvgProdByMonth","useEffect","setTimeout","calculate","startTime","endTime","renderCalculating","renderAvgProdByMonth","getSingleMonth","calculationTime","monthlyData","push","renderMonth","console","log","production","underLine","borderBottom","prod","renderTotal","FindLatitude","setLat","href","navigator","geolocation","getCurrentPosition","position","coords","latitude","error","open","preventDefault","lsPVArrays","pvArraysInit","latInit","App","latAdjusted","pvArraysCleaned","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.bf2d7f17.chunk.js","sourcesContent":["import { toRadians } from \"./util\"\n\nconst {\n  sin,\n  cos,\n  asin,\n  acos,\n  PI\n} = Math\n\nconst currentYear = new Date().getFullYear()\nconst isLeapYear = year => year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0)\nconst daysInYear = isLeapYear(currentYear) ? 366 : 365\nconst maxDecRad = toRadians(23.45)\nconst getDeclinationFromDayOfYear = dayOfYear => (\n  maxDecRad * sin(toRadians(360/365 * (dayOfYear - 81)))\n)\nexport const declinationsForYear = (() => {\n  const result = new Array(daysInYear)\n  for (let i = 0; i < daysInYear; i++) {\n    result[i] = getDeclinationFromDayOfYear(i)\n  }\n  return result\n})()\n\n\nexport const orientationsToAzimuth = (() => {\n  const orientations = [\n    'N',\n    'NNE',\n    'NE',\n    'ENE',\n    'E',\n    'ESE',\n    'SE',\n    'SSE',\n    'S',\n    'SSW',\n    'SW',\n    'WSW',\n    'W',\n    'WNW',\n    'NW',\n    'NNW',\n  ]\n  const result = {}\n  orientations\n    .forEach((orientation, i) => result[orientation]= i*22.5)\n  return result\n})()\n","const {\n  acos,\n  tan\n} = Math\nexport const toRadians = angle => angle * Math.PI / 180\nexport const toDegrees = angle => angle * 180 / Math.PI\n\nexport const simpson = (F, n, a, b) => {\n    if (n % 2 !== 0) {\n        throw new Error(\"n must be even\")\n    }\n    const h = (b - a) / n\n    let sum = F(a);\n\n    for (let i = 1; i < n; i++) {\n        sum += F(i*h + a) * (i % 2 == 0 ? 2 : 4)\n    }\n\n    sum += F(n*h)\n\n    return sum * h / 3\n}\n\n\n","import React, { useState } from 'react'\nimport \"./degrees-input.css\"\nimport { setState } from 'expect/build/jestMatchersObject'\n\n export const addDegree = num => {\n if (String(num).charCodeAt(num.length - 1) == 176) {\n    return num\n  }\n  return num + String.fromCharCode(176)\n}\nexport const removeDegree = str => {\n  str = String(str)\n  if (str.charCodeAt(str.length - 1) == 176)\n    return str.substr(0, str.length - 1)\n  return Number(str)\n}\nexport const DegreesInput = props => {\n  const {_label, setVal, value, ...moreProps} = props\n  const [focused, setFocused] = useState(false)\n  const style = props.width ?\n    {width: props.width + \"px\"} : {}\n  return <>\n    <label className=\"degrees-label\" htmlFor={_label}>{_label}</label>\n    <input\n      className=\"degrees-input\"\n      style={style}\n      name={_label}\n      value={focused ? value : addDegree(value)}\n      aria-label={_label}\n      onBlur={() => {\n        setFocused(false)\n        let numVal = Number(value)\n        if (Number.isNaN(numVal)) {\n          numVal = 0\n        }\n        setVal(numVal)\n      }}\n      onFocus={() => {\n        setFocused(true)\n        const withoutDegree = removeDegree(value)\n        if (withoutDegree === 0) {\n          setVal(\"\")\n        }\n      }}\n      onChange={e => {\n        setVal(e.target.value)\n      }}\n      {...moreProps}\n\n    />\n  </>\n}","import React from 'react'\nimport \"./number-input.css\"\n\nexport const NumberInput = props => {\n  const {_label, ...moreProps} = props\n  return <>\n    <label className=\"number-label\" htmlFor={_label}>{_label}</label>\n    <input\n      className=\"number-input\"\n      name={_label}\n      aria-label={_label}\n      {...moreProps}\n    />\n  </>\n}","import React from 'react'\nimport \"./tooltip.css\"\n\nexport const ToolTip = ({text}) => (\n  <div className=\"tooltip\">\n    <button className=\"tooltip-btn\"><i className=\"fa fa-question\"></i></button>\n    <span className=\"tooltiptext\">{text}</span>\n  </div>\n)","import React from 'react'\nimport { orientationsToAzimuth } from '../calculations/maps'\nimport { DegreesInput } from '../ui/degrees-input'\nimport \"./PVArrayInfo.css\"\nimport { NumberInput } from '../ui/number-input'\nimport { ToolTip } from '../ui/tooltip'\n\nexport const PVArrayInfo = ({remove, setVal, val}) => {\n  return <>\n    <div className=\"form-group\">\n      <DegreesInput\n        setVal={value => setVal(\"tilt\", value)}\n        _label=\"Tilt\"\n        value={val.tilt}\n      />\n      <ToolTip\n        text={\"The angle of the panel from the ground\"}\n      />\n    </div>\n    <div className=\"form-group\">\n      <label htmlFor=\"orientation\">Orientation</label>\n      <select\n        className=\"select-group\"\n        value={val.orientation}\n        onChange={e => setVal(\"orientation\", e.target.value)}\n      >\n        {\n          Object.keys(orientationsToAzimuth)\n            .map(orientation => (\n              <option\n              key={orientation}\n              value={orientation}\n              >\n                {orientation}\n              </option>\n            )\n          )\n        }\n      </select>\n      <ToolTip\n        text={\"The direction toward which the panel is tilted\"}\n      />\n    </div>\n    <div className=\"form-group\">\n      <NumberInput\n        _label=\"Watts\"\n        value={val.watts}\n        onChange={e => setVal(\"watts\", e.target.value)}\n      />\n      <button className=\"button\" onClick={remove}>-</button>\n    </div>\n  </>\n}\n","import React, {useState} from 'react'\nimport \"./PVArraysInfo.css\"\nimport { PVArrayInfo } from './PVArrayInfo'\nimport { ToolTip } from '../ui/tooltip'\n\nexport const PVArraysInfo = ({pvArrays, setPVArrays, pvArrayInit}) => {\n\n  const addArray = () => setPVArrays([...pvArrays, pvArrayInit])\n  const removeArray = i => () => setPVArrays([\n    ...pvArrays.slice(0, i),\n    ...pvArrays.slice(i + 1),\n  ])\n  const setVal = i => (key, val) => setPVArrays([\n    ...pvArrays.slice(0, i),\n    {\n      ...pvArrays[i],\n      [key]: val,\n    },\n    ...pvArrays.slice(i + 1),\n  ])\n  return <>\n    <div className=\"panels-group\">\n      <h3 className=\"pv-arrays-header\">PV Arrays <ToolTip text=\"Epstein didn't kill himself\" /></h3>\n      {pvArrays.map((pvArray, i) => (\n        <div>\n        <span className=\"array-number\">{i+ 1}.</span>\n        <PVArrayInfo\n          key={i}\n          setVal={setVal(i)}\n          remove={removeArray(i)}\n          val={pvArray}\n        />\n        </div>\n      ))}\n    <button className=\"button\" onClick={addArray}>+</button>\n    </div>\n  </>\n}","export const memoize = fn => {\n  const cache = {}\n  return (...args) => {\n    const key = JSON.stringify(args)\n    if (cache[key]) {\n      return cache[key]\n    }\n    return cache[key] = fn(...args)\n  }\n}\n\nconst memoizeLSPrefix = \"memoizeLS\"\nconst memoizeLSVersion = \"1\"\nconst savedVersion = window.localStorage.memoizeLSVersion\nif (typeof savedVersion !== \"undefined\" && savedVersion !== memoizeLSVersion) {\n  for (const key in window.localStorage) {\n    if (key.startsWith(memoizeLSPrefix)) {\n      delete window.localStorage[key]\n    }\n  }\n}\n\nexport const memoizeLS = (prefix, fn) => {\n  return (...args) => {\n    const key = memoizeLSPrefix + memoizeLSVersion + prefix + JSON.stringify(args)\n    if (window.localStorage[key]) {\n      return JSON.parse(window.localStorage[key])\n    }\n    const result = fn(...args)\n    window.localStorage[key] = JSON.stringify(result)\n    return result\n  }\n}\n\nexport const truncate = (num, precision) => {\n  const factor = 10**precision\n  return (num * factor | 0) / factor\n}","import { simpson, toRadians } from './util'\nimport { declinationsForYear } from './maps'\nimport { memoize } from '../util'\nconst SAMPLES_PER_DAY = 1000\n\nconst {\n  sin,\n  cos,\n  asin,\n  acos,\n  tan,\n  PI\n} = Math\n\nconst mCos = memoize(cos)\nconst mSin = memoize(sin)\nconst mTan = memoize(tan)\n\nexport const calculateWHFactorForYear = memoize(opts => (\n  declinationsForYear.map(dec => calculateWHFactorForDay({...opts, dec}))\n))\n\nexport const noonToSunsetRad = (lat, dec) => (\n  acos(-mTan(lat)*mTan(dec)) / toRadians(15)\n)\nexport const calculateWHFactorForDay = memoize(opts => {\n  const instantPercentage = x => {\n    const hourAngle = x*PI/12\n    if (typeof hourAngle === \"undefined\") {\n      debugger\n    }\n    const percentage = instantIntensityPercentage({\n      ...opts,\n      hourAngle\n    })\n    if (percentage < 0) {\n      return 0\n    }\n    return percentage\n  }\n  const intervalRad = noonToSunsetRad(opts.lat, opts.dec)\n  const result = simpson(instantPercentage, opts.samplesPerDay, -intervalRad, intervalRad)\n  return result\n})\n\nexport const instantIntensityPercentage = memoize(opts => {\n  const { lat, dec, tilt, orientation, hourAngle } = opts\n  const sinLat = sin(lat)\n  const sinDec = sin(dec)\n  const cosHA = cos(hourAngle)\n  const sinHA = sin(hourAngle)\n  const cosLat = cos(lat)\n  const cosDec = cos(dec)\n  const altitude = asin(sinDec * sinLat + cosDec * cosHA * cosLat)\n  const cosAlt = cos(altitude)\n\n  const tmp = (sinDec * cosLat - cosDec * cosHA * sinLat) /  cosAlt\n\n  let azimuth;\n  if (tmp < -1) {\n    azimuth = Math.PI\n  } else if (tmp > 1) {\n    azimuth = 0\n  } else {\n    azimuth = acos(tmp)\n  }\n\n  if (sinHA > 0) {\n    azimuth = 2 * PI - azimuth\n  }\n  const sinAlt = sin(altitude)\n  return sinAlt * cos(tilt) + cosAlt * sin(tilt) * cos(orientation - azimuth)\n})","import { calculateWHFactorForYear } from \"../calculations/wh-factor\"\nimport { memoize, memoizeLS } from \"../util\"\n\n\nconst currentYear = new Date().getFullYear()\nconst getDaysInMonth = memoize((year, month) => new Date(year, month, 0).getDate())\nconst getIntervalAvg = arr => arr.reduce((acc, cur) => acc+cur, 0) / arr.length\n\nexport const getAvgProdByMonth = memoize(pvArrayInfo => {\n  const { watts, ...whFactorInfo } = pvArrayInfo\n  const whFactorForYear = calculateWHFactorForYear(whFactorInfo)\n  let curDay = 0\n  return [...new Array(12)]\n    .map((_, i) => {\n      const monthFactors = whFactorForYear\n        .slice(curDay, curDay += getDaysInMonth(currentYear, i))\n      const intervalAvg = getIntervalAvg(monthFactors)\n      return intervalAvg\n    })\n    .map(whFactor => whFactor*watts)\n})\n\nexport const getAvgProdByMonthLS = memoizeLS(\"getAvgProdByMonth\", getAvgProdByMonth)","import React, { useState, useEffect } from 'react'\nimport { getAvgProdByMonthLS } from './energy-production'\nimport \"./styles.css\"\nimport { memoize, truncate } from '../util'\n\n\nconst monthLabels = [\n  'Jan',\n  'Feb',\n  'Mar',\n  'Apr',\n  'May',\n  'Jun',\n  'Jul',\n  'Aug',\n  'Sep',\n  'Oct',\n  'Nov',\n  'Dec',\n]\nexport const AverageOutputPerDayByMonth = ({pvArrays, lat}) => {\n  const getAvgProdsByMonth = pvArrays => pvArrays\n    .map(pvArray => getAvgProdByMonthLS({...pvArray, lat, samplesPerDay: 100}))\n  const [avgProdByMonth, setAvgProdByMonth] =\n    useState({\n      calculating: false,\n      data: [] as any[],\n      time: 0,\n    })\n  useEffect(() => {\n    setTimeout(calculate, 0)\n  }, [])\n\n  const calculate = () => {\n    setAvgProdByMonth({\n      data: [],\n      calculating: true,\n      time: 0,\n    })\n    setTimeout(() => {\n      const startTime = +new Date\n      const data = getAvgProdsByMonth(pvArrays)\n      const endTime = +new Date\n      setAvgProdByMonth({\n        data,\n        calculating: false,\n        time: endTime - startTime,\n      })\n    }, 0)\n  }\n  return (\n    <div>\n    <button className=\"button\" onClick={calculate}>Calculate</button>\n    <h3 className=\"display-header\">\n      Average Production Per Day  (kWh)\n    </h3>\n    {avgProdByMonth.calculating ?\n      renderCalculating() :\n      renderAvgProdByMonth(avgProdByMonth)}\n    </div>\n  )\n}\nconst renderCalculating = () => <div className=\"calculating\">Calculating...</div>\n\nconst renderCalculationTime = calculationTime => {\n  if (calculationTime > 10) {\n    console.log(\"calculationTime\", calculationTime)\n    return (\n      <div className=\"calc-time\">\n        Calculation Time: {truncate(calculationTime/1000, 2)} seconds\n      </div>\n    )\n  }\n  return \"\"\n}\n\nconst getSingleMonth = memoize((data, i) => (\n  data.reduce((acc, cur) => [...acc, cur[i]], [])\n))\nconst renderAvgProdByMonth = avgProdByMonth => {\n  // const monthProds = []\n  // avgProdByMonth\n  //   .map((prod, i) => )\n\n  const monthlyData = [] as any[]\n  for (let i = 0; i < 12; i++) {\n    monthlyData.push(getSingleMonth(avgProdByMonth.data, i))\n  }\n\n  return (\n    <>\n      <div className=\"all-months-wrapper\">\n        {monthlyData.map(renderMonth)}\n      </div>\n      {renderCalculationTime(avgProdByMonth.time)}\n    </>\n  )\n}\n\nconst renderMonth = (production, i) => {\n  const underLine = production.length > 1 ? {\n    borderBottom: \"1px solid black\",\n  } : {}\n  return (\n    <div key={i} className=\"month-wrapper\">\n      <div className=\"month-label\">{monthLabels[i]}</div>\n      <div style={underLine}>\n        {production.map((prod, i) => (\n          <div className=\"month-data\" key={i}>\n            {/* {production.length > 1 ? (i + 1) + \". \" : \"\"} */}\n            {truncate(prod / 1000, 2)}</div>\n        ))}\n      </div>\n      {renderTotal(production)}\n    </div>\n  )\n}\n\nconst renderTotal = production => {\n  if (production.length < 2) {\n    return \"\"\n  }\n  const sum = production.reduce((acc, cur) => acc + cur, 0)\n  return <div className=\"month-total\">\n    {truncate(sum / 1000, 2)}\n  </div>\n}\n\n\n","import React from 'react'\nimport { truncate } from './util';\nexport const FindLatitude = ({setLat}) => (\n  <a\n      className=\"lat-link\"\n      href=\"https://www.latlong.net/\"\n      target=\"_blank\"\n      onClick={e => {\n        try {\n          navigator.geolocation.getCurrentPosition(position => {\n            setLat(truncate(position.coords.latitude, 2))\n          }, error => {\n            window.open(\n              'https://www.latlong.net',\n              '_blank' // <- This is what makes it open in a new window.\n            );\n          })\n          e.preventDefault()\n        } catch (e) {}\n      }}>Find My Latitude</a>\n)","import React, {useState} from 'react';\nimport './App.css';\nimport {PVArraysInfo} from './PVArraysInfo/PVArraysInfo';\nimport { AverageOutputPerDayByMonth } from './display/AverageOutputPerDayByMonth';\nimport { toRadians } from './calculations/util';\nimport { orientationsToAzimuth } from './calculations/maps';\nimport { DegreesInput } from './ui/degrees-input';\nimport { FindLatitude } from './FindLatitude';\n\nconst pvArrayInit = {\n  tilt: 0,\n  orientation: \"S\",\n  watts: 500,\n}\nconst lsPVArrays = window.localStorage.pvArrays\nconst pvArraysInit = lsPVArrays ? JSON.parse(lsPVArrays) : [pvArrayInit]\nconst latInit = window.localStorage.lat ? window.localStorage.lat : 0\nconst App: React.FC = () => {\n  const [pvArrays, setPVArrays] = useState(pvArraysInit)\n  const [lat, setLat] = useState(latInit)\n  const latAdjusted = toRadians(Number(lat))\n  const pvArraysCleaned = pvArrays.map(pvArray => ({\n    ...pvArray,\n    orientation: toRadians(orientationsToAzimuth[pvArray.orientation]),\n    tilt: toRadians(pvArray.tilt)\n  }))\n  window.localStorage.pvArrays = JSON.stringify(pvArrays)\n  window.localStorage.lat = lat\n  return (\n    <div className=\"App\">\n      <header>\n        <h1 className=\"header\">Solar Power Calculator</h1>\n      </header>\n      <div>\n        <div className=\"form-group\">\n        <DegreesInput\n          setVal={setLat}\n          _label=\"Latitude\"\n          value={lat}\n          width={80}\n        />\n        <FindLatitude setLat={setLat} />\n        </div>\n        <div className=\"form-group\">\n        </div>\n      </div>\n      <PVArraysInfo\n        pvArrays={pvArrays}\n        setPVArrays={setPVArrays}\n        pvArrayInit={pvArrayInit}\n      />\n      <AverageOutputPerDayByMonth pvArrays={pvArraysCleaned} lat={latAdjusted} />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'react-app-polyfill/ie9'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}